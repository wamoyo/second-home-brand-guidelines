<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slide Revenue Estimator - Second Home Vacation Rentals</title>

    <!-- Leaflet.js CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>

    <style>
        /* Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, Helvetica, sans-serif;
            font-weight: 300;
            font-size: 16px;
            line-height: 1.75;
            color: #333;
            background-color: #f7f7f7;
        }

        /* Layout */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .section {
            padding: 50px 0;
        }

        /* Header */
        .header {
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)),
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600"><rect fill="%23333" width="1200" height="600"/><polygon fill="%23444" points="0,600 400,200 800,400 1200,100 1200,600"/><polygon fill="%23555" points="0,600 300,300 600,450 900,250 1200,350 1200,600"/></svg>');
            background-size: cover;
            background-position: center;
            padding: 30px 0;
            text-align: center;
            color: #fff;
        }

        .header-logo {
            max-width: 250px;
            width: 100%;
            height: auto;
            filter: brightness(0) invert(1);
            margin-bottom: 15px;
        }

        .header h1 {
            font-size: 32px;
            font-weight: 300;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 16px;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Progress Bar */
        .progress-container {
            background: #fff;
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .progress-bar-wrapper {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .progress-step {
            flex: 1;
            text-align: center;
            font-size: 12px;
            color: #999;
            font-weight: 700;
            position: relative;
        }

        .progress-step.active {
            color: #00BF8F;
        }

        .progress-step.completed {
            color: #00BF8F;
        }

        .progress-step-number {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #ccc;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 8px auto;
            font-size: 14px;
            font-weight: 700;
        }

        .progress-step.active .progress-step-number {
            background: #00BF8F;
        }

        .progress-step.completed .progress-step-number {
            background: #00BF8F;
        }

        .progress-bar {
            height: 6px;
            background: #ccc;
            position: relative;
            border-radius: 0;
        }

        .progress-bar-fill {
            height: 100%;
            background: #00BF8F;
            transition: width 0.3s ease;
            border-radius: 0;
        }

        /* Slide Container */
        .slide-container {
            max-width: 700px;
            margin: 0 auto;
            padding: 0;
            min-height: 500px;
            position: relative;
        }

        .slide {
            display: none;
            animation: slideIn 0.3s ease-in;
            padding: 20px 0;
        }

        .slide.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        h2 {
            font-size: 32px;
            margin-bottom: 15px;
            color: #b3503e;
            font-weight: 700;
        }

        h3 {
            font-size: 24px;
            margin-bottom: 20px;
            color: #b3503e;
            font-weight: 700;
        }

        .slide-description {
            font-size: 16px;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 30px;
            position: relative;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 700;
            color: #333;
            font-size: 16px;
        }

        label .required {
            color: #b3503e;
            font-weight: 700;
        }

        label .optional {
            color: #999;
            font-weight: 400;
            font-size: 14px;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="number"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ccc;
            border-radius: 0;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 16px;
            background-color: #fff;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="tel"]:focus,
        input[type="number"]:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #00BF8F;
        }

        input::placeholder,
        textarea::placeholder {
            color: #ccc;
        }

        textarea {
            resize: vertical;
            min-height: 120px;
        }

        /* Property Type Cards */
        .property-type-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .property-type-card {
            background: #f7f7f7;
            border: 2px solid #ccc;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .property-type-card:hover,
        .property-type-card.selected {
            border-color: #00BF8F;
            background: #f0fff0;
        }

        .property-type-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .property-type-label {
            font-size: 16px;
            font-weight: 700;
            color: #333;
        }

        /* Amenities Grid */
        .amenities-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .amenity-checkbox {
            display: flex;
            align-items: center;
            padding: 12px;
            background: #f7f7f7;
            border: 2px solid #ccc;
            cursor: pointer;
            transition: all 0.3s;
        }

        .amenity-checkbox:hover {
            border-color: #00BF8F;
            background: #f0fff0;
        }

        .amenity-checkbox.selected {
            border-color: #00BF8F;
            background: #00BF8F;
            color: #fff;
        }

        .amenity-checkbox input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
            cursor: pointer;
        }

        .amenity-checkbox label {
            margin: 0;
            font-weight: 400;
            cursor: pointer;
            flex: 1;
        }

        /* Navigation Buttons */
        .slide-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 15px;
        }

        .button {
            display: inline-block;
            padding: 15px 40px;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 18px;
            font-weight: 700;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 0;
        }

        .button-primary {
            background-color: #00BF8F;
            color: #fff;
        }

        .button-primary:hover {
            background-color: #00a077;
        }

        .button-primary:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        .button-secondary {
            background-color: #ccc;
            color: #333;
        }

        .button-secondary:hover {
            background-color: #bbb;
        }

        .button-secondary:disabled {
            background-color: #eee;
            color: #ccc;
            cursor: not-allowed;
        }

        /* Revenue Card */
        .revenue-card {
            background: linear-gradient(135deg, #00BF8F 0%, #00a077 100%);
            color: #fff;
            padding: 40px;
            text-align: center;
            margin: 30px 0;
        }

        .revenue-amount {
            font-size: 56px;
            font-weight: 700;
            margin: 20px 0;
        }

        .revenue-label {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .revenue-range {
            font-size: 18px;
            margin-top: 15px;
            opacity: 0.9;
        }

        .revenue-details {
            background: rgba(255,255,255,0.2);
            padding: 20px;
            margin-top: 25px;
            text-align: left;
        }

        .revenue-details h4 {
            font-size: 18px;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .revenue-details ul {
            list-style: none;
            font-size: 15px;
            line-height: 2;
        }

        .revenue-details ul li:before {
            content: "‚úì ";
            margin-right: 8px;
        }

        /* Info Box */
        .info-box {
            background: #f7f7f7;
            border-left: 4px solid #00BF8F;
            padding: 20px;
            margin: 20px 0;
            font-size: 14px;
        }

        .info-box strong {
            color: #00BF8F;
        }

        /* Location Autocomplete */
        .location-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #fff;
            border: 2px solid #00BF8F;
            border-top: none;
            max-height: 200px;
            overflow-y: auto;
            z-index: 9999;
            display: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .location-suggestions.active {
            display: block;
        }

        .location-suggestion-item {
            padding: 12px;
            cursor: pointer;
            border-bottom: 1px solid #f7f7f7;
            transition: background 0.2s;
        }

        .location-suggestion-item:hover {
            background: #f0fff0;
        }

        /* Map */
        .map-container {
            margin: 20px 0;
            border: 2px solid #ccc;
            background: #f7f7f7;
            height: 500px;
            position: relative;
        }

        #propertyMap {
            width: 100%;
            height: 100%;
            border-radius: 0;
        }

        /* Custom marker styles */
        .custom-marker {
            background-color: #00BF8F;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 3px solid #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        /* Make map attribution smaller and less obtrusive */
        .leaflet-control-attribution {
            font-size: 8px !important;
            opacity: 0.5;
            background: rgba(255, 255, 255, 0.7) !important;
            padding: 2px 4px !important;
        }

        .leaflet-control-attribution:hover {
            opacity: 0.8;
        }

        .map-marker {
            cursor: pointer;
            transition: all 0.2s;
        }

        .map-marker:hover {
            fill: #b3503e;
            transform: scale(1.2);
        }

        /* Star Rating */
        .star-rating-container {
            text-align: center;
            padding: 30px;
            background: #f7f7f7;
        }

        .star-rating {
            font-size: 60px;
            letter-spacing: 10px;
            display: inline-flex;
            gap: 5px;
        }

        .star-wrapper {
            position: relative;
            display: inline-block;
            cursor: pointer;
        }

        .star {
            color: #ccc;
            transition: all 0.2s;
            position: relative;
        }

        .star.full {
            color: #00BF8F;
        }

        .star.half {
            background: linear-gradient(90deg, #00BF8F 50%, #ccc 50%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .star-rating-label {
            margin-top: 15px;
            font-size: 18px;
            font-weight: 700;
            color: #666;
        }

        /* Photo Upload */
        .photo-upload-area {
            border: 2px dashed #ccc;
            padding: 40px;
            text-align: center;
            background: #f7f7f7;
            cursor: pointer;
            transition: all 0.3s;
        }

        .photo-upload-area:hover {
            border-color: #00BF8F;
            background: #f0fff0;
        }

        .photo-upload-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .photo-upload-text {
            font-size: 16px;
            color: #333;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .photo-upload-hint {
            font-size: 14px;
            color: #999;
        }

        .photo-preview-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }

        .photo-preview-item {
            position: relative;
            aspect-ratio: 1;
            border: 2px solid #ccc;
            overflow: hidden;
        }

        .photo-preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-preview-remove {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #b3503e;
            color: #fff;
            border: none;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-weight: 700;
            font-size: 16px;
        }

        .photo-preview-remove:hover {
            background: #9a4434;
        }

        /* Thank You Card */
        .thank-you-card {
            background: linear-gradient(135deg, #00BF8F 0%, #00a077 100%);
            color: #fff;
            padding: 50px;
            text-align: center;
        }

        .thank-you-icon {
            font-size: 80px;
            width: 100px;
            height: 100px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px auto;
            font-weight: 700;
        }

        /* Footer */
        .footer {
            background-color: #000;
            color: #999;
            padding: 30px 0;
            text-align: center;
        }

        .footer p {
            margin: 0;
            font-size: 14px;
        }

        .footer a {
            color: #00BF8F;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 24px;
            }

            .slide {
                padding: 20px 0;
            }

            h2 {
                font-size: 24px;
            }

            .property-type-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .amenities-grid {
                grid-template-columns: 1fr;
            }

            .progress-step {
                font-size: 10px;
            }

            .progress-step-number {
                width: 25px;
                height: 25px;
                font-size: 12px;
            }

            .slide-navigation {
                flex-direction: column-reverse;
            }

            .button {
                width: 100%;
                text-align: center;
            }

            .star-rating {
                font-size: 50px;
                letter-spacing: 5px;
            }

            .thank-you-card {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <img src="logo-charcoal-500.png" alt="Second Home Vacation Rentals" class="header-logo">
            <h1>Slide Revenue Estimator</h1>
            <p>Answer a few quick questions to get your personalized revenue estimate</p>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar-wrapper">
            <div class="progress-steps" id="progressSteps">
                <!-- Progress steps will be dynamically generated -->
            </div>
            <div class="progress-bar">
                <div class="progress-bar-fill" id="progressBarFill" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <!-- Slides Section -->
    <section class="section">
        <div class="container">
            <div class="slide-container">
                <!-- Slide 1: Contact Info -->
                <div class="slide active" data-slide="1">
                    <h2>Let's Get Started</h2>
                    <p class="slide-description">First, we'll need your contact information so we can send you the detailed estimate.</p>

                    <div class="info-box" style="margin-bottom: 30px;">
                        <strong>üîí Your Privacy:</strong> We will use your email for the sole purpose of sending your estimate and never share with third parties.
                    </div>

                    <div class="form-group">
                        <label for="firstName">First Name <span class="required">*</span></label>
                        <input type="text" id="firstName" placeholder="John" required>
                    </div>

                    <div class="form-group">
                        <label for="lastName">Last Name <span class="required">*</span></label>
                        <input type="text" id="lastName" placeholder="Smith" required>
                    </div>

                    <div class="form-group">
                        <label for="email">Email Address <span class="required">*</span></label>
                        <input type="email" id="email" placeholder="your@email.com" required>
                    </div>

                    <div class="form-group">
                        <label for="phone">Phone Number <span class="required">*</span></label>
                        <input type="tel" id="phone" placeholder="(970) 555-1234" required>
                    </div>

                    <div class="slide-navigation">
                        <button class="button button-secondary" onclick="prevSlide()" disabled>‚Üê Previous</button>
                        <button class="button button-primary" onclick="nextSlide()">Next ‚Üí</button>
                    </div>
                </div>

                <!-- Slide 2: Property Type -->
                <div class="slide" data-slide="2">
                    <h2>Property Type</h2>
                    <p class="slide-description">What type of property do you have?</p>

                    <div class="property-type-grid">
                        <div class="property-type-card" onclick="selectPropertyType(this, 'cabin')">
                            <div class="property-type-icon">üèïÔ∏è</div>
                            <div class="property-type-label">Cabin</div>
                        </div>
                        <div class="property-type-card" onclick="selectPropertyType(this, 'house')">
                            <div class="property-type-icon">üè†</div>
                            <div class="property-type-label">House</div>
                        </div>
                        <div class="property-type-card" onclick="selectPropertyType(this, 'condo')">
                            <div class="property-type-icon">üè¢</div>
                            <div class="property-type-label">Condo</div>
                        </div>
                        <div class="property-type-card" onclick="selectPropertyType(this, 'chalet')">
                            <div class="property-type-icon">‚õ∞Ô∏è</div>
                            <div class="property-type-label">Chalet</div>
                        </div>
                        <div class="property-type-card" onclick="selectPropertyType(this, 'townhome')">
                            <div class="property-type-icon">üèòÔ∏è</div>
                            <div class="property-type-label">Townhome</div>
                        </div>
                        <div class="property-type-card" onclick="selectPropertyType(this, 'lodge')">
                            <div class="property-type-icon">üèîÔ∏è</div>
                            <div class="property-type-label">Lodge</div>
                        </div>
                    </div>

                    <div class="slide-navigation">
                        <button class="button button-secondary" onclick="prevSlide()">‚Üê Previous</button>
                        <button class="button button-primary" onclick="nextSlide()" id="propertyTypeNext" disabled>Next ‚Üí</button>
                    </div>
                </div>

                <!-- Slide 3: Location -->
                <div class="slide" data-slide="3">
                    <h2>Property Location</h2>
                    <p class="slide-description">Enter your property address or click on the map below.</p>

                    <div class="form-group">
                        <label for="locationSearch">Property Address <span class="required">*</span></label>
                        <input type="text" id="locationSearch" placeholder="Start typing address..." required autocomplete="off" oninput="handleLocationInput()">
                        <div id="locationSuggestions" class="location-suggestions"></div>
                    </div>

                    <div class="info-box" style="margin-bottom: 20px;">
                        <strong>Service Area:</strong> We serve Park County, Colorado - specifically the Alma and Placer Valley area along Highway 9 between Breckenridge and Fairplay.
                    </div>

                    <div class="map-container">
                        <div id="propertyMap"></div>
                    </div>

                    <div class="slide-navigation">
                        <button class="button button-secondary" onclick="prevSlide()">‚Üê Previous</button>
                        <button class="button button-primary" onclick="nextSlide()">Next ‚Üí</button>
                    </div>
                </div>

                <!-- Slide 4: Property Details -->
                <div class="slide" data-slide="4">
                    <h2>Property Details</h2>
                    <p class="slide-description">Tell us about your property's size and capacity.</p>

                    <div class="form-group">
                        <label for="bedrooms">Bedrooms <span class="required">*</span></label>
                        <select id="bedrooms" required>
                            <option value="">Select number</option>
                            <option value="1">1 Bedroom</option>
                            <option value="2">2 Bedrooms</option>
                            <option value="3">3 Bedrooms</option>
                            <option value="4">4 Bedrooms</option>
                            <option value="5">5 Bedrooms</option>
                            <option value="6">6+ Bedrooms</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="bathrooms">Bathrooms <span class="required">*</span></label>
                        <select id="bathrooms" required>
                            <option value="">Select number</option>
                            <option value="1">1 Bathroom</option>
                            <option value="1.5">1.5 Bathrooms</option>
                            <option value="2">2 Bathrooms</option>
                            <option value="2.5">2.5 Bathrooms</option>
                            <option value="3">3 Bathrooms</option>
                            <option value="3.5">3.5 Bathrooms</option>
                            <option value="4">4+ Bathrooms</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="maxGuests">Maximum Guest Capacity <span class="required">*</span></label>
                        <input type="number" id="maxGuests" placeholder="8" required>
                    </div>

                    <div class="form-group">
                        <label for="squareFootage">Square Footage <span class="optional">(optional)</span></label>
                        <input type="number" id="squareFootage" placeholder="2500">
                    </div>

                    <div class="slide-navigation">
                        <button class="button button-secondary" onclick="prevSlide()">‚Üê Previous</button>
                        <button class="button button-primary" onclick="nextSlide()">Next ‚Üí</button>
                    </div>
                </div>

                <!-- Slide 5: Quality Assessment -->
                <div class="slide" data-slide="5">
                    <h2>Property Quality</h2>
                    <p class="slide-description">Help us assess your property's quality. Choose a star rating or upload photos for our team to review.</p>

                    <h3 style="margin-top: 20px; margin-bottom: 15px;">Option 1: Star Rating</h3>
                    <p style="font-size: 14px; color: #666; margin-bottom: 15px; text-align: center;">Click left side of star for half-star, right side for full star</p>
                    <div class="star-rating-container">
                        <div class="star-rating" id="starRatingContainer">
                            <!-- Stars will be generated by JavaScript -->
                        </div>
                        <div class="star-rating-label" id="starRatingLabel">Select a rating</div>
                    </div>

                    <div style="text-align: center; margin: 30px 0; color: #999; font-weight: 700;">‚Äî OR ‚Äî</div>

                    <h3 style="margin-bottom: 15px;">Option 2: Upload Photos</h3>
                    <p style="font-size: 14px; color: #666; margin-bottom: 15px;">Upload 3-10 photos and our team will assess the quality.</p>

                    <div class="photo-upload-area" id="photoUploadArea" onclick="document.getElementById('qualityPhotos').click()">
                        <div class="photo-upload-icon">üì∏</div>
                        <div class="photo-upload-text">Click to upload photos</div>
                        <div class="photo-upload-hint">JPG, PNG (3-10 photos recommended)</div>
                    </div>
                    <input type="file" id="qualityPhotos" multiple accept="image/*" style="display: none;" onchange="handlePhotoUpload()">
                    <div class="photo-preview-list" id="photoPreviewList"></div>

                    <div class="slide-navigation">
                        <button class="button button-secondary" onclick="prevSlide()">‚Üê Previous</button>
                        <button class="button button-primary" onclick="nextSlide()" id="qualityNext" disabled>Next ‚Üí</button>
                    </div>
                </div>

                <!-- Slide 6: Amenities & Additional Info -->
                <div class="slide" data-slide="6">
                    <h2>Amenities & Features</h2>
                    <p class="slide-description">Select all amenities that apply to your property:</p>

                    <div class="amenities-grid">
                        <div class="amenity-checkbox" onclick="toggleAmenity(this, 'hot_tub')">
                            <input type="checkbox" id="hotTub">
                            <label for="hotTub">üõÅ Hot Tub</label>
                        </div>
                        <div class="amenity-checkbox" onclick="toggleAmenity(this, 'game_room')">
                            <input type="checkbox" id="gameRoom">
                            <label for="gameRoom">üéÆ Game Room</label>
                        </div>
                        <div class="amenity-checkbox" onclick="toggleAmenity(this, 'media_room')">
                            <input type="checkbox" id="mediaRoom">
                            <label for="mediaRoom">üì∫ Media Room</label>
                        </div>
                        <div class="amenity-checkbox" onclick="toggleAmenity(this, 'fireplace')">
                            <input type="checkbox" id="fireplace">
                            <label for="fireplace">üî• Fireplace</label>
                        </div>
                        <div class="amenity-checkbox" onclick="toggleAmenity(this, 'mountain_views')">
                            <input type="checkbox" id="mountainViews">
                            <label for="mountainViews">üèîÔ∏è Mountain Views</label>
                        </div>
                        <div class="amenity-checkbox" onclick="toggleAmenity(this, 'deck')">
                            <input type="checkbox" id="deck">
                            <label for="deck">ü™ë Deck/Patio</label>
                        </div>
                        <div class="amenity-checkbox" onclick="toggleAmenity(this, 'garage')">
                            <input type="checkbox" id="garage">
                            <label for="garage">üöó Garage/Parking</label>
                        </div>
                        <div class="amenity-checkbox" onclick="toggleAmenity(this, 'wifi')">
                            <input type="checkbox" id="wifi">
                            <label for="wifi">üì° High-Speed WiFi</label>
                        </div>
                        <div class="amenity-checkbox" onclick="toggleAmenity(this, 'washer_dryer')">
                            <input type="checkbox" id="washer">
                            <label for="washer">üß∫ Washer/Dryer</label>
                        </div>
                        <div class="amenity-checkbox" onclick="toggleAmenity(this, 'full_kitchen')">
                            <input type="checkbox" id="kitchen">
                            <label for="kitchen">üç≥ Full Kitchen</label>
                        </div>
                        <div class="amenity-checkbox" onclick="toggleAmenity(this, 'pet_friendly')">
                            <input type="checkbox" id="petFriendly">
                            <label for="petFriendly">üêï Pet Friendly</label>
                        </div>
                        <div class="amenity-checkbox" onclick="toggleAmenity(this, 'ski_in_out')">
                            <input type="checkbox" id="skiIn">
                            <label for="skiIn">‚õ∑Ô∏è Ski In/Out</label>
                        </div>
                    </div>

                    <h3 style="margin-top: 30px;">Additional Information</h3>
                    <div class="form-group">
                        <label for="additionalInfo">Special Features <span class="optional">(optional)</span></label>
                        <textarea id="additionalInfo" placeholder="Recent renovations, proximity to attractions, unique features, etc."></textarea>
                    </div>

                    <div class="info-box">
                        <strong>What happens next?</strong> We'll review your submission and send a detailed revenue estimate to your email within 10 minutes.
                    </div>

                    <div class="slide-navigation">
                        <button class="button button-secondary" onclick="prevSlide()">‚Üê Previous</button>
                        <button class="button button-primary" onclick="submitEstimate()">Submit My Request ‚Üí</button>
                    </div>
                </div>

                <!-- Slide 7: Thank You -->
                <div class="slide" data-slide="7">
                    <h2>Thank You!</h2>
                    <p class="slide-description">Your revenue estimate request has been submitted successfully.</p>

                    <div class="thank-you-card">
                        <div class="thank-you-icon">‚úì</div>
                        <h3 style="color: #fff; margin: 20px 0;">We'll Be In Touch Soon</h3>
                        <p style="color: #fff; opacity: 0.9; font-size: 16px;">We're reviewing your property details and will send a comprehensive revenue estimate to <strong id="thankYouEmail"></strong> within the next 10 minutes.</p>
                    </div>

                    <div style="background: #fff; padding: 30px; margin-top: 30px; border-left: 4px solid #00BF8F;">
                        <h3 style="margin-top: 0;">About Second Home Vacation Rentals</h3>
                        <p style="margin-bottom: 15px;">Since our founding, we've been Park County's trusted vacation rental management company. Our office at 29 S. Main Street in Alma (the highest incorporated town in North America) puts us right in the heart of the community we serve.</p>

                        <h4 style="font-size: 18px; margin-top: 25px; margin-bottom: 15px; color: #00BF8F;">Why Property Owners Choose Us:</h4>
                        <ul style="line-height: 2; padding-left: 20px;">
                            <li><strong>Local Expertise:</strong> We exclusively serve the Alma and Placer Valley area - we know this market inside and out</li>
                            <li><strong>Full-Service Management:</strong> From marketing to cleaning to maintenance, we handle everything</li>
                            <li><strong>Premium Marketing:</strong> Your property listed on 15+ platforms with professional photography</li>
                            <li><strong>Transparent Reporting:</strong> Real-time owner portal access and monthly financial statements</li>
                            <li><strong>Hands-On Team:</strong> Local staff available 7 days a week, not a call center</li>
                        </ul>

                        <div style="text-align: center; margin-top: 30px;">
                            <a href="https://www.secondhomevacationrentals.com" class="button button-primary" style="text-decoration: none;">Learn More About Us ‚Üí</a>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 30px;">
                        <p style="color: #666; margin-bottom: 15px;">Questions? We're here to help!</p>
                        <a href="tel:9705467336" style="color: #00BF8F; font-weight: 700; text-decoration: none; font-size: 20px;">(970) 546-7336</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Second Home Vacation Rentals. All rights reserved.</p>
            <p style="margin-top: 10px;">
                Questions? Call us at <a href="tel:9705467336">(970) 546-7336</a> or visit
                <a href="https://www.secondhomevacationrentals.com" target="_blank">secondhomevacationrentals.com</a>
            </p>
            <p style="margin-top: 20px;">
                <a href="index.html">‚Üê Back to Brand Guidelines</a>
            </p>
        </div>
    </footer>

    <script>
        var currentSlide = 1
        var totalSlides = 7
        var formData = {
            propertyType: null,
            amenities: [],
            qualityRating: null,
            qualityPhotos: []
        }

        // Address autocomplete data
        var addresses = []
        var fuse = null
        var selectedAddress = null

        // Map variables
        var map = null
        var propertyMarker = null

        // Initialize progress steps
        function initProgressSteps() {
            var progressSteps = document.getElementById('progressSteps')
            var steps = ['Contact', 'Type', 'Location', 'Details', 'Quality', 'Amenities']

            steps.forEach(function(step, index) {
                var stepDiv = document.createElement('div')
                stepDiv.className = 'progress-step'
                if (index === 0) stepDiv.classList.add('active')
                stepDiv.innerHTML =
                    '<div class="progress-step-number">' + (index + 1) + '</div>' +
                    '<div>' + step + '</div>'
                progressSteps.appendChild(stepDiv)
            })
        }

        // Update progress bar
        function updateProgress() {
            var progressBarFill = document.getElementById('progressBarFill')
            var progressSteps = document.querySelectorAll('.progress-step')

            // Only show progress for slides 1-6 (thank you page is slide 7, not in progress)
            var progressSlide = Math.min(currentSlide, 6)
            var progress = ((progressSlide - 1) / 5) * 100

            progressBarFill.style.width = progress + '%'

            progressSteps.forEach(function(step, index) {
                step.classList.remove('active', 'completed')
                if (index + 1 < progressSlide) {
                    step.classList.add('completed')
                } else if (index + 1 === progressSlide) {
                    step.classList.add('active')
                }
            })
        }

        // Show slide
        function showSlide(slideNumber) {
            var slides = document.querySelectorAll('.slide')
            slides.forEach(function(slide) {
                slide.classList.remove('active')
            })

            var targetSlide = document.querySelector('[data-slide="' + slideNumber + '"]')
            if (targetSlide) {
                targetSlide.classList.add('active')
            }

            currentSlide = slideNumber
            updateProgress()

            // Initialize map when location slide is first shown
            if (slideNumber === 3 && !map) {
                setTimeout(function() {
                    initMap()
                }, 100)
            }

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' })
        }

        // Next slide
        function nextSlide() {
            if (currentSlide < totalSlides) {
                showSlide(currentSlide + 1)
            }
        }

        // Previous slide
        function prevSlide() {
            if (currentSlide > 1) {
                showSlide(currentSlide - 1)
            }
        }

        // Select property type
        var selectedPropertyType = null
        function selectPropertyType(element, type) {
            // Remove previous selection
            document.querySelectorAll('.property-type-card').forEach(function(card) {
                card.classList.remove('selected')
            })

            // Add selection
            element.classList.add('selected')
            selectedPropertyType = type
            formData.propertyType = type

            // Enable next button
            document.getElementById('propertyTypeNext').disabled = false
        }

        // Toggle amenity
        function toggleAmenity(element, amenity) {
            element.classList.toggle('selected')
            var checkbox = element.querySelector('input[type="checkbox"]')
            checkbox.checked = !checkbox.checked

            var index = formData.amenities.indexOf(amenity)
            if (index > -1) {
                formData.amenities.splice(index, 1)
            } else {
                formData.amenities.push(amenity)
            }
        }

        // Initialize map
        function initMap () {
            // Breckenridge coordinates
            var breckenridgeCoords = [39.4817, -106.0384]

            // Initialize map centered on Breckenridge
            map = L.map('propertyMap').setView(breckenridgeCoords, 11)

            // Add OpenStreetMap tiles (100% free, no ads)
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map)

            console.log('Map initialized')
        }

        // Add marker to map for selected address
        function addPropertyMarker (lat, lng, address) {
            // Remove existing marker if any
            if (propertyMarker) {
                map.removeLayer(propertyMarker)
            }

            // Create custom icon
            var greenIcon = L.divIcon({
                className: 'custom-marker',
                iconSize: [20, 20],
                iconAnchor: [10, 10],
                popupAnchor: [0, -10]
            })

            // Add new marker
            propertyMarker = L.marker([lat, lng], { icon: greenIcon }).addTo(map)

            // Add popup with address
            propertyMarker.bindPopup('<strong>Your Property</strong><br>' + address).openPopup()

            // Pan and zoom to marker
            map.setView([lat, lng], 14, { animate: true })
        }

        // Load address data
        function loadAddresses () {
            fetch('./park-county-addresses.json')
                .then(function(response) { return response.json() })
                .then(function(data) {
                    addresses = data
                    initializeAutocomplete()
                })
                .catch(function(error) {
                    console.error('Error loading addresses:', error)
                })
        }

        // Initialize autocomplete with Fuse.js
        function initializeAutocomplete () {
            fuse = new Fuse(addresses, {
                keys: [
                    { name: 'address', weight: 2 },
                    { name: 'street', weight: 1.5 },
                    { name: 'number', weight: 1 },
                    { name: 'city', weight: 1 }
                ],
                threshold: 0.4,
                includeScore: true,
                minMatchCharLength: 2,
                distance: 100
            })

            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.form-group')) {
                    hideLocationSuggestions()
                }
            })
        }

        // Location autocomplete
        function handleLocationInput () {
            var input = document.getElementById('locationSearch')
            var suggestionsDiv = document.getElementById('locationSuggestions')
            var query = input.value.trim()

            if (query.length < 2 || !fuse) {
                hideLocationSuggestions()
                return
            }

            var results = fuse.search(query, { limit: 10 })
            displayLocationResults(results)
        }

        // Display location search results
        function displayLocationResults (results) {
            var suggestionsDiv = document.getElementById('locationSuggestions')

            if (results.length === 0) {
                suggestionsDiv.innerHTML = '<div class="location-suggestion-item" style="text-align: center; color: #999; cursor: default;">No addresses found</div>'
                suggestionsDiv.classList.add('active')
                return
            }

            suggestionsDiv.innerHTML = ''
            results.forEach(function(result) {
                var addr = result.item
                var item = document.createElement('div')
                item.className = 'location-suggestion-item'
                item.innerHTML = '<div style="font-weight: 700;">' + addr.number + ' ' + addr.street + '</div>' +
                                '<div style="font-size: 14px; color: #666;">' + addr.city + ', CO ' + addr.postcode + '</div>'
                item.onclick = function() {
                    selectLocationAddress(addr)
                }
                suggestionsDiv.appendChild(item)
            })

            suggestionsDiv.classList.add('active')
        }

        // Select an address from autocomplete
        function selectLocationAddress (address) {
            var input = document.getElementById('locationSearch')
            input.value = address.number + ' ' + address.street + ', ' + address.city + ', CO ' + address.postcode
            selectedAddress = address
            hideLocationSuggestions()

            // Add marker to map if coordinates exist
            if (address.coordinates && address.coordinates.lat && address.coordinates.lng) {
                var displayAddress = address.number + ' ' + address.street + '<br>' + address.city + ', CO ' + address.postcode
                addPropertyMarker(address.coordinates.lat, address.coordinates.lng, displayAddress)
            }
        }

        // Hide location suggestions
        function hideLocationSuggestions () {
            var suggestionsDiv = document.getElementById('locationSuggestions')
            suggestionsDiv.classList.remove('active')
        }

        // Select location from map
        function selectLocation(location, x, y) {
            document.getElementById('locationSearch').value = location
            document.getElementById('locationSuggestions').classList.remove('active')
        }

        // Initialize star rating
        function initStarRating() {
            var container = document.getElementById('starRatingContainer')
            container.innerHTML = ''

            for (var i = 1; i <= 5; i++) {
                var starWrapper = document.createElement('span')
                starWrapper.className = 'star-wrapper'
                starWrapper.innerHTML = '<span class="star" data-index="' + i + '">‚òÖ</span>'

                // Click handler for half/full star
                starWrapper.addEventListener('click', function(e) {
                    var rect = e.currentTarget.getBoundingClientRect()
                    var clickX = e.clientX - rect.left
                    var starIndex = parseInt(e.currentTarget.querySelector('.star').dataset.index)
                    var isLeftHalf = clickX < rect.width / 2

                    var rating = isLeftHalf ? starIndex - 0.5 : starIndex
                    setStarRating(rating)
                })

                container.appendChild(starWrapper)
            }
        }

        // Star rating
        var selectedStarRating = 0
        function setStarRating(rating) {
            selectedStarRating = rating
            formData.qualityRating = rating

            var stars = document.querySelectorAll('.star')
            stars.forEach(function(star, index) {
                var starIndex = index + 1
                star.classList.remove('full', 'half')

                if (starIndex <= Math.floor(rating)) {
                    star.classList.add('full')
                } else if (starIndex - 0.5 === rating) {
                    star.classList.add('half')
                }
            })

            var labels = [
                'Poor', 'Poor+', 'Fair', 'Fair+', 'Good',
                'Good+', 'Very Good', 'Very Good+', 'Excellent', 'Excellent+'
            ]
            var labelIndex = Math.round(rating * 2) - 1
            document.getElementById('starRatingLabel').textContent = labels[labelIndex] + ' (' + rating + ' stars)'

            // Enable next button
            document.getElementById('qualityNext').disabled = false
        }

        // Photo upload
        var uploadedPhotos = []
        function handlePhotoUpload() {
            var files = document.getElementById('qualityPhotos').files
            var previewList = document.getElementById('photoPreviewList')

            for (var i = 0; i < files.length; i++) {
                var file = files[i]
                uploadedPhotos.push(file)

                var reader = new FileReader()
                reader.onload = (function(file, index) {
                    return function(e) {
                        var previewItem = document.createElement('div')
                        previewItem.className = 'photo-preview-item'
                        previewItem.innerHTML =
                            '<img src="' + e.target.result + '" alt="Property photo">' +
                            '<button class="photo-preview-remove" onclick="removePhoto(' + (uploadedPhotos.length - 1) + ')">√ó</button>'
                        previewList.appendChild(previewItem)
                    }
                })(file, i)
                reader.readAsDataURL(file)
            }

            formData.qualityPhotos = uploadedPhotos

            // Enable next button if at least 3 photos
            if (uploadedPhotos.length >= 3) {
                document.getElementById('qualityNext').disabled = false
            }
        }

        function removePhoto(index) {
            uploadedPhotos.splice(index, 1)
            formData.qualityPhotos = uploadedPhotos

            // Rebuild preview list
            var previewList = document.getElementById('photoPreviewList')
            previewList.innerHTML = ''

            uploadedPhotos.forEach(function(file, i) {
                var reader = new FileReader()
                reader.onload = function(e) {
                    var previewItem = document.createElement('div')
                    previewItem.className = 'photo-preview-item'
                    previewItem.innerHTML =
                        '<img src="' + e.target.result + '" alt="Property photo">' +
                        '<button class="photo-preview-remove" onclick="removePhoto(' + i + ')">√ó</button>'
                    previewList.appendChild(previewItem)
                }
                reader.readAsDataURL(file)
            })

            // Disable next if less than 3 photos and no star rating
            if (uploadedPhotos.length < 3 && selectedStarRating === 0) {
                document.getElementById('qualityNext').disabled = true
            }
        }

        // Submit estimate request
        function submitEstimate() {
            // Get email
            var email = document.getElementById('email').value
            document.getElementById('thankYouEmail').textContent = email

            // In production, this would submit to backend
            // For now, just show thank you page
            showSlide(7)
        }

        // Phone formatting
        document.getElementById('phone').addEventListener('input', function(e) {
            var x = e.target.value.replace(/\D/g, '').match(/(\d{0,3})(\d{0,3})(\d{0,4})/)
            e.target.value = !x[2] ? x[1] : '(' + x[1] + ') ' + x[2] + (x[3] ? '-' + x[3] : '')
        })

        // Initialize on load
        window.onload = function() {
            initProgressSteps()
            updateProgress()
            initStarRating()
            loadAddresses()
            // Map will initialize when user reaches slide 3
        }
    </script>

    <!-- Fuse.js for address autocomplete -->
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0"></script>

    <!-- Leaflet.js -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
</body>
</html>
